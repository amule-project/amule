# CMakeLists.txt for unified search integration tests

# Integration tests
add_executable(LocalSearchIntegrationTest
    integration/LocalSearchIntegrationTest.cpp
    ../manager/UnifiedSearchManager.cpp
    ../engines/local/LocalSearchEngine.cpp
    ../engines/global/GlobalSearchEngine.cpp
    ../engines/kad/KadSearchEngine.cpp
    ../core/SearchId.cpp
)

add_executable(MultiSearchIntegrationTest
    integration/MultiSearchIntegrationTest.cpp
    ../manager/UnifiedSearchManager.cpp
    ../engines/local/LocalSearchEngine.cpp
    ../engines/global/GlobalSearchEngine.cpp
    ../engines/kad/KadSearchEngine.cpp
    ../core/SearchId.cpp
)

add_executable(GlobalSearchIntegrationTest
    integration/GlobalSearchIntegrationTest.cpp
    ../manager/UnifiedSearchManager.cpp
    ../engines/local/LocalSearchEngine.cpp
    ../engines/global/GlobalSearchEngine.cpp
    ../engines/kad/KadSearchEngine.cpp
    ../core/SearchId.cpp
)

# Link against gtest and wxWidgets
target_link_libraries(LocalSearchIntegrationTest PRIVATE
    gtest
    gtest_main
    ${wxWidgets_LIBRARIES}
)

target_link_libraries(MultiSearchIntegrationTest PRIVATE
    gtest
    gtest_main
    ${wxWidgets_LIBRARIES}
)

target_link_libraries(GlobalSearchIntegrationTest PRIVATE
    gtest
    gtest_main
    ${wxWidgets_LIBRARIES}
)

add_executable(KadSearchIntegrationTest
    integration/KadSearchIntegrationTest.cpp
    ../manager/UnifiedSearchManager.cpp
    ../engines/local/LocalSearchEngine.cpp
    ../engines/global/GlobalSearchEngine.cpp
    ../engines/kad/KadSearchEngine.cpp
    ../core/SearchId.cpp
)

target_link_libraries(KadSearchIntegrationTest PRIVATE
    gtest
    gtest_main
    ${wxWidgets_LIBRARIES}
)

# Enable testing
enable_testing()

# Add integration tests
add_test(NAME LocalSearchIntegrationTest COMMAND LocalSearchIntegrationTest)
add_test(NAME MultiSearchIntegrationTest COMMAND MultiSearchIntegrationTest)
add_test(NAME GlobalSearchIntegrationTest COMMAND GlobalSearchIntegrationTest)
add_test(NAME KadSearchIntegrationTest COMMAND KadSearchIntegrationTest)
